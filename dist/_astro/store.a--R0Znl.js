let o=[],h=(e,l)=>{let t=[],s={get(){return s.lc||s.listen(()=>{})(),s.value},l:l||0,lc:0,listen(i,n){return s.lc=t.push(i,n||s.l)/2,()=>{let d=t.indexOf(i);~d&&(t.splice(d,2),--s.lc||s.off())}},notify(i,n){let d=!o.length;for(let r=0;r<t.length;r+=2)o.push(t[r],t[r+1],s.value,i,n);if(d){for(let r=0;r<o.length;r+=5){let v;for(let a=r+1;!v&&(a+=5)<o.length;)o[a]<o[r+1]&&(v=o.push(o[r],o[r+1],o[r+2],o[r+3],o[r+4]));v||o[r](o[r+2],o[r+3],o[r+4])}o.length=0}},off(){},set(i){let n=s.value;n!==i&&(s.value=i,s.notify(n))},subscribe(i,n){let d=s.listen(i,n);return i(s.value),d},value:e};return s};let U=(e,l,t,s)=>(e.events=e.events||{},e.events[t+10]||(e.events[t+10]=s(i=>{e.events[t].reduceRight((n,d)=>(d(n),n),{shared:{},...i})})),e.events[t]=e.events[t]||[],e.events[t].push(l),()=>{let i=e.events[t],n=i.indexOf(l);i.splice(n,1),i.length||(delete e.events[t],e.events[t+10](),delete e.events[t+10])}),M=1e3,N=(e,l)=>U(e,s=>{let i=l(s);i&&e.events[6].push(i)},5,s=>{let i=e.listen;e.listen=(...d)=>(!e.lc&&!e.active&&(e.active=!0,s()),i(...d));let n=e.off;return e.events[6]=[],e.off=()=>{n(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let d of e.events[6])d();e.events[6]=[]}},M)},()=>{e.listen=i,e.off=n}}),y=(e={})=>{let l=h(e);return l.setKey=function(t,s){let i=l.value;typeof s>"u"&&t in l.value?(l.value={...l.value},delete l.value[t],l.notify(i,t)):l.value[t]!==s&&(l.value={...l.value,[t]:s},l.notify(i,t))},l},T=e=>e,E={},c={addEventListener(){},removeEventListener(){}};function O(){try{return typeof localStorage<"u"}catch{return!1}}O()&&(E=localStorage);let R={addEventListener(e,l,t){window.addEventListener("storage",l),window.addEventListener("pageshow",t)},removeEventListener(e,l,t){window.removeEventListener("storage",l),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(c=R);function L(e,l=void 0,t={}){let s=t.encode||T,i=t.decode||T,n=h(l),d=n.set;n.set=a=>{typeof a>"u"?delete E[e]:E[e]=s(a),d(a)};function r(a){a.key===e?a.newValue===null?d(void 0):d(i(a.newValue)):E[e]||d(void 0)}function v(){n.set(E[e]?i(E[e]):l)}return N(n,()=>{if(v(),t.listen!==!1)return c.addEventListener(e,r,v),()=>{c.removeEventListener(e,r,v)}}),n}function w(e,l={},t={}){let s=t.encode||T,i=t.decode||T,n=y(),d=n.setKey,r=(f,u)=>{typeof u>"u"?(t.listen!==!1&&c.perKey&&c.removeEventListener(e+f,a,g),delete E[e+f]):(t.listen!==!1&&c.perKey&&!(f in n.value)&&c.addEventListener(e+f,a,g),E[e+f]=s(u))};n.setKey=(f,u)=>{r(f,u),d(f,u)};let v=n.set;n.set=function(f){for(let u in f)r(u,f[u]);for(let u in n.value)u in f||r(u,void 0);v(f)};function a(f){f.key?f.key.startsWith(e)&&(f.newValue===null?d(f.key.slice(e.length),void 0):d(f.key.slice(e.length),i(f.newValue))):v({})}function g(){let f={...l};for(let u in E)u.startsWith(e)&&(f[u.slice(e.length)]=i(E[u]));for(let u in f)n.setKey(u,f[u])}return N(n,()=>{if(g(),t.listen!==!1)return c.addEventListener(e,a,g),()=>{c.removeEventListener(e,a,g);for(let f in n.value)c.removeEventListener(e+f,a,g)}}),n}const p=h(!1),m=L(!1);L(0);L("config","basic");const A=w({address:"",balance:0});export{p as a,m as i,A as u};
