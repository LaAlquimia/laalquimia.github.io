import{n as B,s as te,S as ne,i as ae,e as T,h as C,c as x,a as L,m as E,k as g,d as c,b as M,f as h,l as A,u as D,o as se,t as P,p as j,j as R,v as z,w as Q,q as G,x as ie,C as H}from"./provider-jsonrpc.Dt8PGCDP.js";import{u as U,i as le}from"./store.a--R0Znl.js";import{g as fe,B as ue,c as re,f as W,p as oe}from"./login.kjyuivvC.js";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const pe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const q=[];function Y(f,e=B){let n;const t=new Set;function u(y){if(te(f,y)&&(f=y,n)){const b=!q.length;for(const s of t)s[1](),q.push(s,f);if(b){for(let s=0;s<q.length;s+=2)q[s][0](q[s+1]);q.length=0}}}function r(y){u(y(f))}function o(y,b=B){const s=[y,b];return t.add(s),t.size===1&&(n=e(u,r)||B),y(f),()=>{t.delete(s),t.size===0&&n&&(n(),n=null)}}return{set:u,update:r,subscribe:o}}const de=[{inputs:[{internalType:"contract IERC20",name:"_stakingToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"AddressInsufficientBalance",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"ANNUAL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SECONDS_IN_A_YEAR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculateReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"resume",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"stakes",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stop",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"}],ce=[{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function J(f){let e,n="Please connect wallet";return{c(){e=T("p"),e.textContent=n},l(t){e=x(t,"P",{"data-svelte-h":!0}),E(e)!=="svelte-byslij"&&(e.textContent=n)},m(t,u){h(t,e,u)},d(t){t&&c(e)}}}function X(f){let e,n,t=f[1].balance+"",u,r,o,y,b=f[1].staked+"",s,a,i,w="ALQ Reward :",_,v,S=f[1].rewards+"",O,N,I,d,p=!f[2]&&Z(f),k=f[2]&&$(f);return{c(){e=T("p"),n=P("ALQ Balance: "),u=P(t),r=C(),o=T("p"),y=P("ALQ Staked : "),s=P(b),a=C(),i=T("p"),i.textContent=w,_=C(),v=T("p"),O=P(S),N=C(),p&&p.c(),I=C(),k&&k.c(),d=j()},l(l){e=x(l,"P",{});var m=L(e);n=R(m,"ALQ Balance: "),u=R(m,t),m.forEach(c),r=g(l),o=x(l,"P",{});var K=L(o);y=R(K,"ALQ Staked : "),s=R(K,b),K.forEach(c),a=g(l),i=x(l,"P",{"data-svelte-h":!0}),E(i)!=="svelte-t6y3rz"&&(i.textContent=w),_=g(l),v=x(l,"P",{});var V=L(v);O=R(V,S),V.forEach(c),N=g(l),p&&p.l(l),I=g(l),k&&k.l(l),d=j()},m(l,m){h(l,e,m),A(e,n),A(e,u),h(l,r,m),h(l,o,m),A(o,y),A(o,s),h(l,a,m),h(l,i,m),h(l,_,m),h(l,v,m),A(v,O),h(l,N,m),p&&p.m(l,m),h(l,I,m),k&&k.m(l,m),h(l,d,m)},p(l,m){m&2&&t!==(t=l[1].balance+"")&&z(u,t),m&2&&b!==(b=l[1].staked+"")&&z(s,b),m&2&&S!==(S=l[1].rewards+"")&&z(O,S),l[2]?p&&(p.d(1),p=null):p?p.p(l,m):(p=Z(l),p.c(),p.m(I.parentNode,I)),l[2]?k?k.p(l,m):(k=$(l),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null)},d(l){l&&(c(e),c(r),c(o),c(a),c(i),c(_),c(v),c(N),c(I),c(d)),p&&p.d(l),k&&k.d(l)}}}function Z(f){let e,n="Approve ALQ",t,u;return{c(){e=T("button"),e.textContent=n,this.h()},l(r){e=x(r,"BUTTON",{class:!0,"data-svelte-h":!0}),E(e)!=="svelte-4lkfbn"&&(e.textContent=n),this.h()},h(){M(e,"class","button svelte-1ec6h1q")},m(r,o){h(r,e,o),t||(u=Q(e,"click",f[5]),t=!0)},p:B,d(r){r&&c(e),t=!1,u()}}}function $(f){let e,n,t,u,r="Stake ALQ",o,y,b,s=f[1].staked&&ee(f);return{c(){e=T("input"),n=C(),t=T("div"),u=T("button"),u.textContent=r,o=C(),s&&s.c(),this.h()},l(a){e=x(a,"INPUT",{class:!0,type:!0,placeholder:!0}),n=g(a),t=x(a,"DIV",{});var i=L(t);u=x(i,"BUTTON",{class:!0,"data-svelte-h":!0}),E(u)!=="svelte-i8vbv3"&&(u.textContent=r),o=g(i),s&&s.l(i),i.forEach(c),this.h()},h(){M(e,"class","text-black input bg-transparent text-white font-bold text-center  svelte-1ec6h1q"),M(e,"type","string"),M(e,"placeholder","Amount to stake"),M(u,"class","button bg-green-300 hover:bg-green-500 rounded py-1 px-5 my-5 text-black font-black svelte-1ec6h1q")},m(a,i){h(a,e,i),G(e,f[0]),h(a,n,i),h(a,t,i),A(t,u),A(t,o),s&&s.m(t,null),y||(b=[Q(e,"input",f[8]),Q(u,"click",f[6])],y=!0)},p(a,i){i&1&&G(e,a[0]),a[1].staked?s?s.p(a,i):(s=ee(a),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(a){a&&(c(e),c(n),c(t)),s&&s.d(),y=!1,ie(b)}}}function ee(f){let e,n="Unstake ALQ",t,u;return{c(){e=T("button"),e.textContent=n,this.h()},l(r){e=x(r,"BUTTON",{class:!0,"data-svelte-h":!0}),E(e)!=="svelte-1qxzqet"&&(e.textContent=n),this.h()},h(){M(e,"class","button bg-red-300 hover:bg-red-500 rounded py-1 px-5 my-5 text-black font-black svelte-1ec6h1q")},m(r,o){h(r,e,o),t||(u=Q(e,"click",f[7]),t=!0)},p:B,d(r){r&&c(e),t=!1,u()}}}function ye(f){let e,n,t,u="ALQ STAKING",r,o,y="20% APR",b,s,a=!f[1].address&&J(),i=f[1].address&&X(f);return{c(){e=T("div"),n=T("div"),t=T("h3"),t.textContent=u,r=C(),o=T("h5"),o.textContent=y,b=C(),a&&a.c(),s=C(),i&&i.c(),this.h()},l(w){e=x(w,"DIV",{class:!0});var _=L(e);n=x(_,"DIV",{class:!0});var v=L(n);t=x(v,"H3",{"data-svelte-h":!0}),E(t)!=="svelte-19wxa3t"&&(t.textContent=u),r=g(v),o=x(v,"H5",{"data-svelte-h":!0}),E(o)!=="svelte-veqo1a"&&(o.textContent=y),b=g(v),a&&a.l(v),s=g(v),i&&i.l(v),v.forEach(c),_.forEach(c),this.h()},h(){M(n,"class","shadow-lg px-5 staking-container text-white bg-black max-w-3xl py-5 rounded-xl svelte-1ec6h1q"),M(e,"class","flex flex-col items-center space-y-5 mx-5 px-5 py-5")},m(w,_){h(w,e,_),A(e,n),A(n,t),A(n,r),A(n,o),A(n,b),a&&a.m(n,null),A(n,s),i&&i.m(n,null)},p(w,[_]){w[1].address?a&&(a.d(1),a=null):a||(a=J(),a.c(),a.m(n,s)),w[1].address?i?i.p(w,_):(i=X(w),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:B,o:B,d(w){w&&c(e),a&&a.d(),i&&i.d()}}}const me="0x4b48c0db4e460c894bfc031d602a5c3b57a26857",F="0xf054176e4ebc9da226b52fc895a1a4a7d9148aeb";function be(f,e,n){let t,u,r;D(f,le,d=>n(13,d)),D(f,U,d=>n(1,u=d));let o=Y(0);D(f,o,d=>n(2,r=d));let y=Y("");D(f,y,d=>n(0,t=d));const b=localStorage.getItem("accountAddress")||null;let s,a,i,w;se(async()=>{window.ethereum==null?(console.log("MetaMask not installed; using read-only defaults"),s=fe(),alert("Metamask Not Installed")):(s=new ue(window.ethereum),a=await s.getSigner(),i=new H(me,ce,a),w=new H(F,de,a),_(),v())});async function _(){const d=await a.getAddress(),p=await i.allowance(d,F);console.log(p),o.set(p)}async function v(){const d=await re(b);U.setKey("address",b),U.setKey("balance",parseFloat(d).toFixed(2));const p=await w.calculateReward(a.address),k=await w.stakes(a.address);U.setKey("rewards",W(`${p}`)),U.setKey("staked",W(`${k[0]}`)),console.log(`${p}`)}async function S(){const d=pe;await(await i.approve(F,d)).wait(),_()}async function O(){const d=oe(t,18);await(await w.stake(d)).wait(),v()}async function N(){await(await w.unstake()).wait(),v()}function I(){t=this.value,y.set(t)}return[t,u,r,o,y,S,O,N,I]}class he extends ne{constructor(e){super(),ae(this,e,be,ye,te,{})}}export{he as default};
