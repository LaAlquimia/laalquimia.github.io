import{D as R,s as se,S as ie,i as fe,m as v,a as O,n as A,o as P,c as L,g as p,q as N,b,w as h,h as K,E as le,p as Y,F as z,x as C,e as j,y as B,z as F,r as J,G as ue,H as D,B as re}from"./store.vHLek7VO.js";import{g as pe,B as oe,C as X,c as de,f as Z,p as ce}from"./login.DbU0rAtH.js";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const ye=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const q=[];function $(i,e=R){let f;const t=new Set;function s(u){if(se(i,u)&&(i=u,f)){const c=!q.length;for(const d of t)d[1](),q.push(d,i);if(c){for(let d=0;d<q.length;d+=2)q[d][0](q[d+1]);q.length=0}}}function n(u){s(u(i))}function l(u,c=R){const d=[u,c];return t.add(d),t.size===1&&(f=e(s,n)||R),u(i),()=>{t.delete(d),t.size===0&&f&&(f(),f=null)}}return{set:s,update:n,subscribe:l}}const me=[{inputs:[{internalType:"contract IERC20",name:"_stakingToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"AddressInsufficientBalance",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"ANNUAL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SECONDS_IN_A_YEAR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"calculateReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"resume",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"stakes",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stop",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"}],be=[{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function ee(i){let e,f="Login",t,s;return{c(){e=v("button"),e.textContent=f,this.h()},l(n){e=A(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-5w7335"&&(e.textContent=f),this.h()},h(){N(e,"class","button svelte-1ec6h1q")},m(n,l){b(n,e,l),t||(s=z(e,"click",i[7]),t=!0)},p:R,d(n){n&&p(e),t=!1,s()}}}function te(i){let e,f,t=i[1].address+"",s,n,l,u,c=i[1].balance+"",d,_,T,g,M=i[1].staked+"",S,x,k,U,E=i[1].rewards+"",o,w,I,Q,y=!i[2]&&ne(i),m=i[2]&&ae(i);return{c(){e=v("p"),f=C("ALQ Address: "),s=C(t),n=O(),l=v("p"),u=C("ALQ Balance: "),d=C(c),_=O(),T=v("p"),g=C("ALQ Staked : "),S=C(M),x=O(),k=v("p"),U=C("ALQ Reward : "),o=C(E),w=O(),y&&y.c(),I=O(),m&&m.c(),Q=j()},l(a){e=A(a,"P",{});var r=P(e);f=B(r,"ALQ Address: "),s=B(r,t),r.forEach(p),n=L(a),l=A(a,"P",{});var G=P(l);u=B(G,"ALQ Balance: "),d=B(G,c),G.forEach(p),_=L(a),T=A(a,"P",{});var H=P(T);g=B(H,"ALQ Staked : "),S=B(H,M),H.forEach(p),x=L(a),k=A(a,"P",{});var V=P(k);U=B(V,"ALQ Reward : "),o=B(V,E),V.forEach(p),w=L(a),y&&y.l(a),I=L(a),m&&m.l(a),Q=j()},m(a,r){b(a,e,r),h(e,f),h(e,s),b(a,n,r),b(a,l,r),h(l,u),h(l,d),b(a,_,r),b(a,T,r),h(T,g),h(T,S),b(a,x,r),b(a,k,r),h(k,U),h(k,o),b(a,w,r),y&&y.m(a,r),b(a,I,r),m&&m.m(a,r),b(a,Q,r)},p(a,r){r&2&&t!==(t=a[1].address+"")&&F(s,t),r&2&&c!==(c=a[1].balance+"")&&F(d,c),r&2&&M!==(M=a[1].staked+"")&&F(S,M),r&2&&E!==(E=a[1].rewards+"")&&F(o,E),a[2]?y&&(y.d(1),y=null):y?y.p(a,r):(y=ne(a),y.c(),y.m(I.parentNode,I)),a[2]?m?m.p(a,r):(m=ae(a),m.c(),m.m(Q.parentNode,Q)):m&&(m.d(1),m=null)},d(a){a&&(p(e),p(n),p(l),p(_),p(T),p(x),p(k),p(w),p(I),p(Q)),y&&y.d(a),m&&m.d(a)}}}function ne(i){let e,f="Approve ALQ",t,s;return{c(){e=v("button"),e.textContent=f,this.h()},l(n){e=A(n,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-4lkfbn"&&(e.textContent=f),this.h()},h(){N(e,"class","button svelte-1ec6h1q")},m(n,l){b(n,e,l),t||(s=z(e,"click",i[5]),t=!0)},p:R,d(n){n&&p(e),t=!1,s()}}}function ae(i){let e,f,t,s="Stake ALQ",n,l;return{c(){e=v("input"),f=O(),t=v("button"),t.textContent=s,this.h()},l(u){e=A(u,"INPUT",{class:!0,type:!0,placeholder:!0}),f=L(u),t=A(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-2y3gf"&&(t.textContent=s),this.h()},h(){N(e,"class","input svelte-1ec6h1q"),N(e,"type","string"),N(e,"placeholder","Amount to stake"),N(t,"class","button svelte-1ec6h1q")},m(u,c){b(u,e,c),J(e,i[0]),b(u,f,c),b(u,t,c),n||(l=[z(e,"input",i[8]),z(t,"click",i[6])],n=!0)},p(u,c){c&1&&J(e,u[0])},d(u){u&&(p(e),p(f),p(t)),n=!1,ue(l)}}}function we(i){let e,f,t=!i[1].address&&ee(i),s=i[1].address&&te(i);return{c(){e=v("div"),t&&t.c(),f=O(),s&&s.c(),this.h()},l(n){e=A(n,"DIV",{class:!0});var l=P(e);t&&t.l(l),f=L(l),s&&s.l(l),l.forEach(p),this.h()},h(){N(e,"class","staking-container text-white bg-gray-900  svelte-1ec6h1q")},m(n,l){b(n,e,l),t&&t.m(e,null),h(e,f),s&&s.m(e,null)},p(n,[l]){n[1].address?t&&(t.d(1),t=null):t?t.p(n,l):(t=ee(n),t.c(),t.m(e,f)),n[1].address?s?s.p(n,l):(s=te(n),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:R,o:R,d(n){n&&p(e),t&&t.d(),s&&s.d()}}}const _e="0x4b48c0db4e460c894bfc031d602a5c3b57a26857",W="0xf054176e4ebc9da226b52fc895a1a4a7d9148aeb";function Te(i,e,f){let t,s,n;K(i,re,o=>f(13,o)),K(i,D,o=>f(1,s=o));let l=$(0);K(i,l,o=>f(2,n=o));let u=$("");K(i,u,o=>f(0,t=o));const c=localStorage.getItem("accountAddress")||null;let d,_,T,g;le(async()=>{window.ethereum==null?(console.log("MetaMask not installed; using read-only defaults"),d=pe(),alert("Metamask Not Installed")):(d=new oe(window.ethereum),_=await d.getSigner(),T=new X(_e,be,_),g=new X(W,me,_),M(),S())});async function M(){const o=await _.getAddress(),w=await T.allowance(o,W);console.log(w),l.set(w)}async function S(){const o=await de(c);D.setKey("address",c),D.setKey("balance",parseFloat(o).toFixed(2));const w=await g.calculateReward(_.address),I=await g.stakes(_.address);D.setKey("rewards",Z(`${w}`)),D.setKey("staked",Z(`${I[0]}`)),console.log(`${w}`)}async function x(){const o=ye;await(await T.approve(W,o)).wait(),M()}async function k(){const o=ce(t,18);await(await g.stake(o)).wait(),S()}async function U(){}function E(){t=this.value,u.set(t)}return[t,s,n,l,u,x,k,U,E]}class ve extends ie{constructor(e){super(),fe(this,e,Te,we,se,{})}}export{ve as default};
